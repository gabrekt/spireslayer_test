import base64
import json

save_data = "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S0VbBgANGQwaNBUVChwNAggcSV9ZWlxVYUVZSQ0YGDoKChUJAwwLDjoSDhxbUUUfCgkKDklzS0VbAhYmHxcQCglbUUUfCgkKDklzS0VbBgANGQwaNAgYEzoRGzoJDhcmDQkWBBdbUUUiNklzS0VbGAQPDjodChEcSV9ZWlNPWldLUlVJWVNNWklzS0VbCAQLDxZbUUUiYUVZS0UCYUVZS0VZS0cMGwILCgEcGEdDS1VVYUVZS0VZS0cUAhYaSV9ZW0lzS0VZS0VZSQwdSV9ZSTYNGQwSDjo7SW9ZS0VZFklzS0VZSx5zS0VZS0VZSRAJDBcYDwAKSV9ZW0lzS0VZS0VZSQgQGAZbUUVJR29ZS0VZS0VbAgFbUUVbOBELAg4cNCdbYUVZS0UER29ZS0VZEG9ZS0VZS0VbHhUeGQQdDhZbUUVJR29ZS0VZS0VbBgwKCEdDS1VVYUVZS0VZS0cQD0dDS0cqHxcQAAAmKUdzS0VZSxhVYUVZS0UCYUVZS0VZS0cMGwILCgEcGEdDS1VVYUVZS0VZS0cUAhYaSV9ZW0lzS0VZS0VZSQwdSV9ZSSEcDQAXDzo7SW9ZS0VZFklzS0VZSx5zS0VZS0VZSRAJDBcYDwAKSV9ZW0lzS0VZS0VZSQgQGAZbUUVJR29ZS0VZS0VbAgFbUUVbLwAfDgsdNCdbYUVZS0UER29ZS0VZEG9ZS0VZS0VbHhUeGQQdDhZbUUVJR29ZS0VZS0VbBgwKCEdDS1VVYUVZS0VZS0cQD0dDS0c9DgMcBQEmKUdzS0VZSxhVYUVZS0UCYUVZS0VZS0cMGwILCgEcGEdDS1VVYUVZS0VZS0cUAhYaSV9ZW0lzS0VZS0VZSQwdSV9ZSSEcDQAXDzo7SW9ZS0VZFklzS0VZSx5zS0VZS0VZSRAJDBcYDwAKSV9ZW0lzS0VZS0VZSQgQGAZbUUVJR29ZS0VZS0VbAgFbUUVbMQQJSW9ZS0VZFklzS0VZSx5zS0VZS0VZSRAJDBcYDwAKSV9ZW0lzS0VZS0VZSQgQGAZbUUVJR29ZS0VZS0VbAgFbUUVbLxAYBwYYGBFbYUVZS0UEYUVZNklzS0VbDgsdBwAKGDoQBQYLDggcBREKSV9ZMDhVYUVZSQgcHxcQCDoQHwAUGDoJHhceDgFbUUUiNklzS0VbGxALDAA6BBYNSV9ZXFBVYUVZSRcWBAgmE0dDS1VVYUVZSQcVAgIRHzoaBBAXHwALGEdDSz4kR29ZS0cLBAoUNBxbUUVJR29ZS0cUDhELAgYmDAoVDzoJDhcmDQkWBBdbUUUiNklzS0VbBgANGQwaNBUWHwwWBRYmDQkWBBcmHhYYDABbUUUiNklzS0VbCQoKGDoVAhYNSV9ZMG9ZS0VZSTYVAggcSycWGBZbR29ZS0VZSTERDkU+HgQLDwwYBUdVYUVZS0VbIwABCgIRBBYNSW9ZSzhVYUVZSQQQNBYcDgEmCAoMBRFbUUVJR29ZS0ccHQAXHzoaAwQXCAAKSV9ZMG9ZS0VZW0tJR29ZS0VZW0tIR29ZS0VZW0tJWElzS0VZS1VXW1dzS0UkR29ZS0cUDhELAgYmCQoKGDoLDgkQCBZbUUUiNklzS0VbGQAVAgYmGAAcDzoaBBAXH0dDS1BVYUVZSQQaHzoXHghbUUVIR29ZS0cUDhELAgYmDwQUCgIcNBEYAAAXSV9ZMDhVYUVZSQILDgAXSV9ZW0lzS0VbBhwKHwALEjoUCgYRAgscSV9ZW0lzS0VbBgANGQwaNAYYBhUfAhccNBAJDBcYDwAdSV9ZW0lzS0VbGwoNAgoXNBYVBBEKSV9ZWElzS0VbCA0WGAAmBQAWHDoLDhIYGQFbUUUfCgkKDklzS0VbDhMcBREmGAAcDzoaBBAXH0dDS1VVYUVZSQgcHxcQCDoLDgkQCBYmBAcNCgwXDgFbUUUiNklzS0VbDwQQBxwmDwQNDkdDS1VVYUVZSQobHwQQBQAdNAYYGQEKSV9ZEBhVYUVZSRUVChwmHwwUDkdDS1RAR29ZS0cRCgsdNBYQEQBbUUVMR29ZS0cUCh0mAwAYBxERSV9ZXFBVYUVZSQgWBRYNDhcmGAAcDzoaBBAXH0dDS1ZKR29ZS0cJBBEQBAsKSV9ZMG9ZS0VZSTUWHwwWBUUqBwoNSUlzS0VZS0cpBBEQBAtZOAkWH0dVYUVZS0VbOwoNAgoXSzYVBBFbYUVZNm8E"


class SaveEditor():
    def __init__(self, encoded_save_data: str) -> None:
        super().__init__()
        self.key = "key"
        self.encoded_save_data = encoded_save_data
        self.json_save_data = self.save_to_json()

    def base64_encode(self, string):
        return base64.b64encode(string)

    def base64_decode(self, string) -> bytes:
        return base64.b64decode(string)

    def save_to_json(self):
        data: bytes = self.base64_decode(self.encoded_save_data)
        json_char_list: list = list()

        for i, value in enumerate(data):
            modulus_index: int = i % len(self.key)
            xor_result: int = data[i] ^ ord(self.key[modulus_index])
            char_result: str = chr(xor_result)
            json_char_list.append(char_result)

        plain_json = ''.join(json_char_list)
        return json.loads(plain_json)

    def json_to_save(self):
        assert self.json_save_data is not None, "JSON save data is None"
        plain_json = json.dumps(self.json_save_data)
        assert isinstance(plain_json, str)

        encoded_char_list: list = list()
        for i, value in enumerate(plain_json):
            modulus_index: int = i % len(self.key)
            xor_result: int = ord(value) ^ ord(self.key[modulus_index])
            encoded_char_list.append(xor_result)

        final_data = self.base64_encode(bytes(encoded_char_list))

        return final_data

    def update_current_health(self, health: int = 200):
        self.json_save_data['current_health'] = health
        assert self.json_save_data.get('current_health') == health


if __name__ == '__main__':
    editor = SaveEditor(save_data)
    editor.update_current_health()

    updated_save_data = editor.json_to_save()
    print(updated_save_data)
